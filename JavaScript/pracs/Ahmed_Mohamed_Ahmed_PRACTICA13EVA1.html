<!DOCTYPE html>
<html lang="es-es">
    <head>
        <meta charset="UTF-8">
        <title>Document</title>
    </head>
    <body>
        <script>
            
            //valid comienza siendo falso, para luego pedirle un numero un numero al usuario y poner la variable a true en caso de que sea valido
            //si no es valido sigue siendo false por lo que se vuelve a ejecutar el bucle hasta que lo sea
            var valid=false;
                
            //cuando se cancele el prompt se parara la ejecucion con un aviso y un error
            //cuando el dato introducido sea un numero que este en entre el 1 y el 10, valid sera true y se rompera el bucle consiguiendo asi un numero valido
            while (valid==false) {
                var n=prompt('Introduzca un numero entre el 1 y el 10');
                if (n==null) {
                    alert('Ejecucion cancelada');
                    throw new Error('Ejecución cancelada');
                }

                n=parseInt(n);
                if (!isNaN(n)&&n>=1&&n<=10) {
                    valid=true;
                }
            }

            //todo exactamente igual que arriba pero solo validamos que la cadena no este vacia
            valid=false;

            while (valid==false) {
                var t=prompt('Introduzca una texto corto por favor (a poder ser).');
                if (t==null) {
                    alert('Ejecucion cancelada');
                    throw new Error('Ejecución cancelada');
                }
                if (t!=0) {
                    alert('Texto correcto.');
                    valid=true;
                }
            }

            //la cadena donde almacenaremos la cadena codificada
            var t2='';

            //recorremos toda la cadena de texto posicion a posicion codificiando cada posicion, para despues 
            //descodificarla y añadirla a nuestra nueva cadena para luego mostrarla por pantalla
            //con codificar me refiero a sacar su charCode y sumarle el valor de la clave

            for (let i = 0; i < t.length; i++) {
                if (t[i]==" ") {
                    t2+=' ';
                    continue;
                }
                t2+=String.fromCharCode(t.charCodeAt(i)+n);
            }

            document.writeln(t2);

        </script>
    </body>
</html> 